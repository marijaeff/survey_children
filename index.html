<!DOCTYPE html>
<html lang="lv">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Izvēlies vecumu</title>
  <link rel="stylesheet" href="survey.css" />
</head>

<body class="is-page-entering">

  <div class="app">

    <div class="card">

      <div class="admin-controls">
        <button data-lang="lv" class="lang-btn active">LV</button>
        <button data-lang="ru" class="lang-btn">RU</button>
        <button data-lang="en" class="lang-btn">EN</button>
      </div>

      <div class="admin-controls">
        <button data-branch="riga" class="branch-btn active">Rīga</button>
        <button data-branch="liepaja" class="branch-btn" disabled>Liepāja</button>
      </div>

      <h1>Izvēlies bērna vecumu</h1>

      <div class="age-options">
        <button data-age="4-7">4–7 gadi</button>
        <button data-age="8-12">8–12 gadi</button>
        <button data-age="13-18">13–18 gadi</button>
      </div>
    </div>

    <script>

      if (!sessionStorage.getItem("branch")) {
        sessionStorage.setItem("branch", "riga");
      }

      function updateBranchUI() {
        const current = sessionStorage.getItem("branch");
        document.querySelectorAll("[data-branch]").forEach(btn => {
          btn.classList.toggle("active", btn.dataset.branch === current);
        });
      }

      updateBranchUI();

      document.querySelectorAll("[data-branch]").forEach(btn => {
        btn.addEventListener("click", () => {
          sessionStorage.setItem("branch", btn.dataset.branch);
          updateBranchUI();
        });
      });

      // noklusējuma valoda
      if (!sessionStorage.getItem("language")) {
        sessionStorage.setItem("language", "lv");
      }
      // atjaunina valodas pogu stāvokli
      function updateLangUI() {
        const current = sessionStorage.getItem("language");
        document.querySelectorAll("[data-lang]").forEach(btn => {
          btn.classList.toggle("active", btn.dataset.lang === current);
        });
      }

      updateLangUI();
      // pievieno notikumu klausītājus valodas pogām
      document.querySelectorAll("[data-lang]").forEach(btn => {
        btn.addEventListener("click", () => {
          sessionStorage.setItem("language", btn.dataset.lang);
          updateLangUI();
        });
      });


      document.body.classList.add("is-page-entering");

      requestAnimationFrame(() => {
        document.body.classList.remove("is-page-entering");
        document.body.classList.add("is-page-visible");
      });

      document.querySelectorAll('.age-options button').forEach(btn => {
        btn.addEventListener('click', () => {
          sessionStorage.setItem('age_group', btn.dataset.age);


          document.body.classList.remove("is-page-visible");
          document.body.classList.add("is-page-leaving");

          setTimeout(() => {
            window.location.href = 'intro.html';
          }, 80);
        });
      });
    </script>


</body>

</html>